@import term
@import mem
@import fs_fat12

@extern interrupt_init_protected_mode fun

biosServiceAdr u32

copyEax raw<"=r"> -> u32
    mov eax, eax
;

@export start fun
    biosServiceAdr <- copyEax()

    @term.init(biosServiceAdr, 0)
    @term.printString("Initializing Bits Runner...\n", @term.FOREGROUND_GRAY)

    interrupt_init_protected_mode()
    @mem.init()
    @fs_fat12.init()

    @term.printString("All ready, welcome to Bits Runner!\n", @term.FOREGROUND_GRAY)

    rep
    ;
;